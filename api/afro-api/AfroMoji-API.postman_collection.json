{
  "info": {
    "name": "AfroMoji API",
    "description": "Complete API collection for AfroMoji backend",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "afromoji"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{accessToken}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3001",
      "type": "string"
    },
    {
      "key": "accessToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "refreshToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "otpSessionId",
      "value": "",
      "type": "string"
    },
    {
      "key": "testPhone",
      "value": "+1234567890",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    },
    {
      "key": "postId",
      "value": "",
      "type": "string"
    },
    {
      "key": "generationId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Auth",
      "item": [
        {
          "name": "Send OTP",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.otpSessionId) {",
                  "        pm.collectionVariables.set('otpSessionId', response.otpSessionId);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phoneE164\": \"{{testPhone}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/otp/send",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "otp", "send"]
            }
          },
          "response": []
        },
        {
          "name": "Verify OTP",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.accessToken) {",
                  "        pm.collectionVariables.set('accessToken', response.accessToken);",
                  "    }",
                  "    if (response.refreshToken) {",
                  "        pm.collectionVariables.set('refreshToken', response.refreshToken);",
                  "    }",
                  "    if (response.user && response.user.id) {",
                  "        pm.collectionVariables.set('userId', response.user.id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"otpSessionId\": \"{{otpSessionId}}\",\n  \"code\": \"123456\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/otp/verify",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "otp", "verify"]
            }
          },
          "response": []
        },
        {
          "name": "Get Me",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/auth/me",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "me"]
            }
          },
          "response": []
        },
        {
          "name": "Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.accessToken) {",
                  "        pm.collectionVariables.set('accessToken', response.accessToken);",
                  "    }",
                  "    if (response.refreshToken) {",
                  "        pm.collectionVariables.set('refreshToken', response.refreshToken);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/refresh",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "refresh"]
            }
          },
          "response": []
        },
        {
          "name": "Logout",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "logout"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Tribes",
      "item": [
        {
          "name": "Get All Tribes",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tribes",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tribes"]
            }
          },
          "response": []
        },
        {
          "name": "Get Tribe by Slug",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tribes/wakandan-lineage",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tribes", "wakandan-lineage"]
            }
          },
          "response": []
        },
        {
          "name": "Get Tribe Preview",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tribes/wakandan-lineage/preview",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tribes", "wakandan-lineage", "preview"]
            }
          },
          "response": []
        },
        {
          "name": "Join Tribe",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tribes/wakandan-lineage/join",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tribes", "wakandan-lineage", "join"]
            }
          },
          "response": []
        },
        {
          "name": "Get Tribe Posts",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tribes/wakandan-lineage/posts?limit=20&cursor=",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tribes", "wakandan-lineage", "posts"],
              "query": [
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "cursor",
                  "value": ""
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Tribe Members",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/tribes/wakandan-lineage/members?limit=20&cursor=",
              "host": ["{{baseUrl}}"],
              "path": ["api", "tribes", "wakandan-lineage", "members"],
              "query": [
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "cursor",
                  "value": ""
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "Get My Profile",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users/me",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "me"]
            }
          },
          "response": []
        },
        {
          "name": "Update My Profile",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"displayName\": \"Test User\",\n  \"bio\": \"Testing the AfroMoji API\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/users/me",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "me"]
            }
          },
          "response": []
        },
        {
          "name": "Set My Avatar",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"generationId\": \"{{generationId}}\",\n  \"versionId\": \"v1\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/users/me/avatar",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", "me", "avatar"]
            }
          },
          "response": []
        },
        {
          "name": "Get User Profile",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users/:username",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", ":username"],
              "variable": [
                {
                  "key": "username",
                  "value": "testuser"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get User Avatar",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users/:username/avatar",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", ":username", "avatar"],
              "variable": [
                {
                  "key": "username",
                  "value": "testuser"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get User Posts",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/users/:username/posts?limit=20&cursor=",
              "host": ["{{baseUrl}}"],
              "path": ["api", "users", ":username", "posts"],
              "query": [
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "cursor",
                  "value": ""
                }
              ],
              "variable": [
                {
                  "key": "username",
                  "value": "testuser"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Generate",
      "item": [
        {
          "name": "Create Generation",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.id) {",
                  "        pm.collectionVariables.set('generationId', response.id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"prompt\": \"A confident African warrior with traditional markings\",\n  \"style\": \"realistic\",\n  \"quality\": \"standard\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/generate",
              "host": ["{{baseUrl}}"],
              "path": ["api", "generate"]
            }
          },
          "response": []
        },
        {
          "name": "Refine Generation",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"prompt\": \"Make it more vibrant with gold accents\",\n  \"quality\": \"high\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/generate/{{generationId}}/refine",
              "host": ["{{baseUrl}}"],
              "path": ["api", "generate", "{{generationId}}", "refine"]
            }
          },
          "response": []
        },
        {
          "name": "Get Generation",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/generate/{{generationId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "generate", "{{generationId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Get User Generations",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/generate?limit=20&cursor=",
              "host": ["{{baseUrl}}"],
              "path": ["api", "generate"],
              "query": [
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "cursor",
                  "value": ""
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Media",
      "item": [
        {
          "name": "Init Selfie Upload",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"filename\": \"selfie.jpg\",\n  \"contentType\": \"image/jpeg\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/media/selfies/init",
              "host": ["{{baseUrl}}"],
              "path": ["api", "media", "selfies", "init"]
            }
          },
          "response": []
        },
        {
          "name": "Complete Selfie Upload",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"selfieId\": \"selfie_id_from_init\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/media/selfies/complete",
              "host": ["{{baseUrl}}"],
              "path": ["api", "media", "selfies", "complete"]
            }
          },
          "response": []
        },
        {
          "name": "Get My Selfies",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/media/selfies",
              "host": ["{{baseUrl}}"],
              "path": ["api", "media", "selfies"]
            }
          },
          "response": []
        },
        {
          "name": "Delete Selfie",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/media/selfies/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "media", "selfies", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "selfie_id"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Posts",
      "item": [
        {
          "name": "Create Post",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.id) {",
                  "        pm.collectionVariables.set('postId', response.id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"generationId\": \"{{generationId}}\",\n  \"versionId\": \"v1\",\n  \"caption\": \"My first AfroMoji creation! ðŸŽ¨\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/posts",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts"]
            }
          },
          "response": []
        },
        {
          "name": "Get Post",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/posts/{{postId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", "{{postId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Delete Post",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/posts/{{postId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", "{{postId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Respect Post",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/posts/{{postId}}/respect",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", "{{postId}}", "respect"]
            }
          },
          "response": []
        },
        {
          "name": "Unrespect Post",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/posts/{{postId}}/respect",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", "{{postId}}", "respect"]
            }
          },
          "response": []
        },
        {
          "name": "Share Post",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/posts/{{postId}}/share",
              "host": ["{{baseUrl}}"],
              "path": ["api", "posts", "{{postId}}", "share"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Feed",
      "item": [
        {
          "name": "Get Feed",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/feed?limit=20&cursor=",
              "host": ["{{baseUrl}}"],
              "path": ["api", "feed"],
              "query": [
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "cursor",
                  "value": ""
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Hot Feed",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/feed/hot?limit=20&cursor=",
              "host": ["{{baseUrl}}"],
              "path": ["api", "feed", "hot"],
              "query": [
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "cursor",
                  "value": ""
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Admin",
      "item": [
        {
          "name": "Flag Post",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"inappropriate_content\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/posts/:id/flag",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "posts", ":id", "flag"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{postId}}"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Remove Post",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"violates_community_guidelines\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/posts/:id/remove",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "posts", ":id", "remove"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{postId}}"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Ban User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"repeated_violations\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/users/:id/ban",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users", ":id", "ban"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{userId}}"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Unban User",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/users/:id/unban",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users", ":id", "unban"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{userId}}"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Worker",
      "item": [
        {
          "name": "Process Generation",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"generationId\": \"{{generationId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/worker/process-generation",
              "host": ["{{baseUrl}}"],
              "path": ["worker", "process-generation"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Jobs",
      "item": [
        {
          "name": "Execute Generation Job",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"generationId\": \"{{generationId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/jobs/generation",
              "host": ["{{baseUrl}}"],
              "path": ["api", "jobs", "generation"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Cron",
      "item": [
        {
          "name": "Generation Retry",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/cron/generation-retry",
              "host": ["{{baseUrl}}"],
              "path": ["api", "cron", "generation-retry"]
            }
          },
          "response": []
        }
      ]
    }
  ]
}





